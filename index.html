<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="https://glitch.com/favicon.ico">

    <title>Layout Shift Terminator</title>

    <link rel="stylesheet" href="/style.css" />
    <script src="/script.js" type="module"></script>
  </head>
  <body>
    <h1>
      Layout Shift Terminator
    </h1>
    
    <noscript>
      <p>
        <em>This app requires JavaScript to be enabled.</em>
      </p>
    </noscript>
    
    <form action="javascript:"> 
      
      <label for="markup">Layout-shifting markup:</label>
      <textarea id="markup" data-autofocus placeholder="Paste layout shifting HTML here.">
        <div id="example-lazy-iframe" class="presized-embed">
  <iframe id="simulated-embed" width="100%" style="outline:solid 1px gray; border:0; display:block" height="1" loading="lazy" src="https://example.com/"></iframe>
  <script type="module">
    const iframe = document.getElementById('simulated-embed');
    const setSize = () => { iframe.height = iframe.offsetWidth >= 700 ? 400 : 231 }; 
    setTimeout( () => { iframe.height = 100;}, 250 );
    setTimeout( () => { iframe.height = 200;}, 500 );
    setTimeout(setSize, 750);
    window.addEventListener('resize', setSize);
  </script>
</div>
      </textarea>
      <button type="submit" disabled>
        Eliminate Layout Shift
      </button>
      
      <section id="calculation" hidden>
        <h2>
          Terminating Layout Shiftsâ€¦
        </h2>
        
        <progress></progress>
        <iframe src="about:blank"></iframe>
      </section>

      <fieldset id="results" hidden>
        <textarea readonly></textarea>
      </fieldset>
    </form>
  </body>
</html>
